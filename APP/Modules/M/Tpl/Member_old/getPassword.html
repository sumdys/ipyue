<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>密码找回-品悦手机网</title>
<link href="__PUBLIC__/mobile/css/global.css" rel="stylesheet" type="text/css">
<style type="text/css">
#topnav{padding-right:42px;}
.box h2{padding-right:42px;}
.box p.title{font-size:14px;padding-bottom:10px;}
#import{padding:10px 10px 0 10px;margin-bottom:10px;height:160px;}
#import span{margin-bottom:10px;display:block;}
</style>
</head>

<body>
<div id="page">
  <div id="content">
    <h1 id="topnav"><span class="left icon"><a href="{:U('/')}" class="icon-home">首页</a></span>我的品悦</h1>
    <div class="box">
      <form action="" method="post">
        <h2><span class="left icon"><a href="{:U('/Member/login')}" class="icon-return">返回</a></span>忘记密码</h2>
        <div id="import">
          <p class="title">1、填写手机号</p>
          <span>
              <input name="phone" type="text" id="phone" maxlength="11" required placeholder="请输入手机号" class="txt">
          </span>
          <p>
          (1).请输入您注册会员时通过验证的手机号。<br/>
          (2).重置密码限每天使用三次,如有疑问请拨打<br/>
          &nbsp;&nbsp;&nbsp;&nbsp;<strong>400-608-5188</strong>&nbsp;&nbsp;进行人工咨询。
          </p>
        </div>
         <input type="hidden" name="act" value="step1">
         <input type="submit" value="下一步" class="sub">
      </form>
    </div>
  </div>
</div>
<script type="text/javascript" src="__PUBLIC__/mobile/js/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="__PUBLIC__/mobile/js/msg.js"></script>
<script type="text/javascript">
$(function(){
	//提交表单
	$('form').submit(function(){
		var url="{:U('/Member/getPassword')}";
		if(!(verify('#phone','手机',11,/^1[3|4|5|8][0-9]\d{4,8}$/))){
				return false;
				}else{
					$.post(url,$(this).serialize(),function(data){
						if(data){
                            $('html').html(data);
						}else{
                            msg('手机号码有误');
                        }
						},'html');
				}
                return false;
		});
});
//表单验证
function verify(id,name,maxlength,expression){
	var value=$(id).val(),content="";
	/*alert(expr);*/
	content=value==""?name+"不能为空！":value.length>maxlength?name+"内容超出限制！":(!expression.test(value))?name+"输入不正确！":"";
	if(content!=""){return msg(content);}else{return true;}
	}
</script>

</body>
</html>
