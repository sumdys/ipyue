<!------添加订单【业务员】------->
<style type="text/css">
.div{margin-left:10px;}
.div li{list-style:none;}
.ul input{float:none!important; width:130px;vertical-align:text-bottom;}
.ul select{float:none!important;}
.floatLeft li{float:left; margin-right:25px; padding-bottom:10px; margin-top:10px;}
.borderbottom{border-bottom:1px solid #CCC; clear:both;}
.clear{clear:both; margin-bottom:10px;}
.style{color:#03F;cursor:pointer; margin-top:14px!important;}
.pageFormContent{border:none!important;}
.add{background:url('__PUBLIC__/admin/Img/add.gif') no-repeat; padding-left:18px;}
.inputBcak{background:url('__PUBLIC__/admin/Img/rmb.gif') no-repeat left center!important; background-color:#FFF!important;padding-left:10px!important;}
.sk1{width:83px;}
</style>
<script>
    $(function(){
		$(".city").live('click',function(){			
			popCityList($(this)[0]);						 
		})
    })		
</script>
<script type="text/javascript" src="__PUBLIC__/js/member.js"></script>
<script type="text/javascript" src="__PUBLIC__/js/hotcitypop/popcitylist.js"></script>
<div class="div">
    <form action="__URL__/insertData/navTabId/__MODULE__-newOrder"  method="post" class="pageForm required-validate" onsubmit="return validateCallback(this, dialogAjaxDone)">
	<input type="hidden" value="{$orderID}" name="orderID"/>
    <input type="hidden" name="type" value="add">
  		<div class="pageFormContent" layoutH="58">   
            <ul class="ul">
                <li style="clear:both;">
                    <ul class="floatLeft">
                        <li>订单ID号：<span style="color:#09F;">{$orderID}</span></li>
                        <li><span style="color:#F00; margin-left:16px;">*</span>PNR：<input value="" type="text" name="PNR" /></li>
                    </ul>
                </li>
                
                <li class="borderbottom">
                    <ul class="floatLeft">
                        <li style="margin-left:6px;">订票人姓名：<input value="" type="text" name="memberName" /></li>
                        <li>手机号：<input value="" type="text" name="memberTel"  placeholder="即会员号，重要"/></li>
                        <li>客户类型：
                        	<select name="customerType">
                            	<option value="1">新客</option><option value="2">老客</option><option value="3">介绍</option>
                                <option value="4">同行</option><option value="5">大客户</option>                                
                            </select>
                        </li>
                        <li>QQ号：<input value="" type="text" name="memberQQ" /></li>
                        <li>企业邮箱：<input value="" type="text" name="memberEmail" /></li>
                    </ul>
                </li>
                
                <li class="borderbottom">
                    <ul class="floatLeft">
                        <li>乘机人姓名1：<input value="" type="text" name="cjrInfo[1][name]"  placeholder="例：zhang/san" /></li>
                        <li num>DOCS1：<input value="" type="text" name="cjrInfo[1][DOCS]" style="width:750px;"/></li>
                    </ul>
                   <li class="clear" id="apper"><span class="add style" id="cjr" num="1">添加乘机人</span></li>      
                </li>               
                
                <li class="borderbottom">
                    <ul class="floatLeft">
                        <li style="margin-left:40px;">航程1：<input value="" type="text" name="hcInfo[1][departure]" class="text city" />&nbsp;-&nbsp;<input value="" type="text" name="hcInfo[1][destination]" class="text city" /></li>
                        <li>日期1：<input value="" type="text" name="hcInfo[1][date]" class="date textInput valid"/></li>
                    </ul>
                    <li class="clear" id="hcapper"><span class="add style" id="hc" num="1">添加航程</span></li>
                    
                    <li class="clear" style="margin-left:46px;">航线：
                        <select name="airLine" style="width:130px;">
                            <option value="1">国内</option><option value="2">美国</option><option value="3">欧洲</option>
                            <option value="4">亚洲</option><option value="5">非洲</option><option value="6">南美洲</option><option value="7">加拿大</option>
                        </select>
                    </li>
                </li>
                  	    
               <li class="borderbottom">
                    <ul class="floatLeft">
                    	<li><span style="color:#F00;">*</span>出票OFFIC号：<input value="" type="text" name="ticketOfficNO" /></li>
                        <li><span style="color:#F00;">*</span>供应商：         
                     		<select name="supplier"><volist name="supplier2" id="vo"> <option value="{$vo.id}">{$vo.supplier}</option> </volist> </select>  
                        </li>
                        <li>文件号：<input value="" type="text" name="fileNumber" /></li>
                    </ul>
                    <li class="clear" style="margin-left:23px;"><span style="color:#F00;">*</span>返点政策：<input value="" type="text" name="rebatePolicy" style="width:950px;"/></li>
          		</li>  
             
                <li class="borderbottom">
                    <ul class="floatLeft">                    	
                        <li><span style="color:#F00;margin-left:35px;">*</span>采购价：<input value="" type="text" name="procurementPrice" class="inputBcak" id="cg" onKeyUp="value=value.replace(/[^\d\.]/g,'');SumNum();" /></li>
                        <li><span style="color:#F00;">*</span>销售价：<input value="" type="text" name="salePrice"  class="inputBcak" id="xs" onKeyUp="value=value.replace(/[^\d\.]/g,'');SumNum();"/></li>                        
                        <li><span style="color:#F00;">*</span>税费：<input value="" type="text" name="taxation"  class="inputBcak" id="sf" onKeyUp="value=value.replace(/[^\d\.]/g,'');SumNum();"/></li>
                        <li>保险类型：<select name="insuranceType" id="insuranceType"><option value="1">华泰A</option><option value="2">中国人保</option></select></li>
                        <li>保险金额：<input value="" type="text" name="insurance"  class="inputBcak" id="bx" onKeyUp="value=value.replace(/[^\d\.]/g,'');SumNum();"/></li>                        
                    </ul>
                    <li class="clear" style="margin-left:27px;">
                    	应收金额：<input value="" type="text" placeholder ="￥" disabled="disabled" id="res" style="border:none; background-color:#eef4f5;"/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        应付金额：<input value="" type="text" placeholder ="￥" disabled="disabled" id="fu" style="border:none;background-color:#eef4f5;"/>
                    </li>                   
                </li> 
                
                 <li class="borderbottom">
                    <ul class="floatLeft">
                        <li style="margin-left:12px;">供应商费用：
                            <select name="supplierCostType">
                                <option value="1">其它供应商收入费用</option><option value="2">其它供应商支出费用</option><option value="3">供应商改期手续费</option>
                                <option value="4">供应商退票手续费</option><option value="5">供应商签证费</option><option value="6">供应商机票款</option><option value="7">航空公司改签</option>
                            </select>                
                            <input value="" type="text" name="supplierCost"  class="inputBcak"/>            
                        </li>           
                        <li style="margin-left:12px;">内部费用：            
                            <select name="interiorCostType">
                                <option value="1">转账费</option><option value="2">刷卡费</option><option value="3">追位费</option><option value="4">汇款手续费</option>
                                <option value="5">燃气费</option><option value="6">有线电视费</option><option value="7">办公费用</option><option value="8">快递费</option>
                                <option value="9">电话费</option><option value="10">社保</option><option value="11">管理费</option><option value="12">支、取、转账手续费</option>
                                <option value="13">广告费</option><option value="14">软件支持费</option><option value="15">无线上网</option>
                            </select>   
                                    
                            <input value="" type="text" name="interiorCost" class="inputBcak"/>            
                        </li>
                         <li style="margin-left:12px;">其他费用：
                            <select name="otherCostType">
                                <option value="1">eterm租金支出</option><option value="2">行程单收入</option><option value="3">行程单支出</option>
                                <option value="4">UR租金收入</option><option value="5">航空保险收入</option><option value="6">航空保险支出</option><option value="7">第三方保险支出</option>
                            </select>             
                            <input value="" type="text" name="otherCost" class="inputBcak"/>
                         </li>
                    </ul>
                </li> 
                
                 <li class="borderbottom">
                    <ul class="floatLeft">
                        <li style="margin-left:22px;">收入金额1：<input value="" type="text" name="zfInfo[1][procurementPrice]" class="inputBcak"/></li>
                        <li>收款账号1：
                            <select name="zfInfo[1][amount_type]" class="sk">
                                <option value="">-请选择-</option><option value="1">广州账号</option><option value="2">北京账号</option>
                                <option value="3">上海账号</option><option value="4">深圳账号</option><option value="5">商旅账号</option><option value="6">其他账号</option>
                            </select>    
                            <select name="zfInfo[1][bank]" class="bank"><option value="">-请选择-</option></select>       
                        </li>
                        <li>汇款人1：<input value="" type="text" name="zfInfo[1][remitter]" /></li>
                        <li>支付日期1：<input value="" type="text" name="zfInfo[1][payTime]" class="date textInput valid"/></li>
                        <li>支付方式1：
                            <select name="zfInfo[1][payType]">
                                <option value="">-请选择-</option><option value="1">在线支付</option><option value="2">转账支付</option><option value="3">刷卡支付</option><option value="4">现金支付</option>
                            </select>
                        </li>
                    </ul>
                     <li class="clear" id="zfapper"><span class="add style" id="zf" num="1">添加收入信息</span></li>
                     <li class="clear" style="margin-left:30px;">收入备注：<input value="" type="text" name="remark2" style="width:950px;"/></li>
                </li> 
            </ul>
        </div>
        
        <div class="formBar">
            <ul>
                <li><div class="buttonActive"><div class="buttonContent"><button type="submit">提交</button></div></div></li>
                <li><div class="button"><div class="buttonContent"><button type="button" class="close">取消</button></div></div></li>
            </ul>
        </div> 
    </form>
</div>
        	
<script type="text/javascript">
	$(function(){		
		//添加乘机人
		$('#cjr').click(function(){
			var num=parseInt($(this).attr('num')) + 1;
			var html='';
			html += '<ul class="floatLeft" style="clear:both;" id="addcjr">';
			html +='<li>乘机人姓名'+num+'：<input value="" type="text" name="cjrInfo['+num+'][name]"/></li>';
			html +='<li>DOCS'+num+'：<input value="" type="text" name="cjrInfo['+num+'][DOCS]" style="width:760px;"/></li>';
			html += '<li class="del style" >删除</li>';
			html += '</ul>';
			$("#apper").before(html);
			$(this).attr("num",num);
			//重载删除
			$("#addcjr .del").bind("click",function(){$(this).parent().remove();});				
			});				
		//删除
		$("#addcjr .del").bind("click",function(){$(this).parent().remove();});	
		
		
		//添加航程
		$('#hc').click(function(){
			var num=parseInt($(this).attr('num')) + 1;
			var html='';
			html += '<ul class="floatLeft" style="clear:both;" id="addhc">';
			html +='<li style="margin-left:40px;">航程'+num+'：<input value="" type="text" name="hcInfo['+num+'][departure]" class="text city" style="width:133px;"/>';
			html +='&nbsp;-&nbsp;<input value="" type="text" name="hcInfo['+num+'][destination]" class="text city"  style="width:133px;"/></li>';
			html +='<li>日期'+num+'：<input value="" type="text" name="hcInfo['+num+'][date]" class="date textInput valid"/></li>';
			html += '<li class="del style" >删除</li>';
			html += '</ul>';
			$("#hcapper").before(html);
			$(this).attr("num",num);
			//重载删除
			$("#addhc .del").bind("click",function(){$(this).parent().remove();});				
			});				
		//删除
		$("#addhc .del").bind("click",function(){$(this).parent().remove();});			
		
		//添加支付信息
		$('#zf').click(function(){
			var num=parseInt($(this).attr('num')) + 1;
			var html='';
			html += '<ul class="floatLeft" style="clear:both;" id="addzf">';
			html +='<li style="margin-left:22px;">收入金额'+num+'：<input value="" type="text" name="zfInfo['+num+'][procurementPrice]" style="width:133px;"/></li>';
			html +='<li>收款账号'+num+'：<select name="zfInfo['+num+'][amount_type]" class="sk"><option value="0">-请选择-</option><option value="1">广州账号</option><option value="2">北京账号</option><option value="3">上海账号</option><option value="4">深圳账号</option><option value="5">商旅账号</option><option value="6">其他账号</option></select><select name="zfInfo['+num+'][bank]" class="bank"><option value="0">-请选择-</option></select> ';
			html +='<li>汇款人'+num+'：<input value="" type="text" name="zfInfo['+num+'][remitter]" style="width:133px;"/></li>';
			html +='<li>支付日期'+num+'：<input value="" type="text" name="zfInfo['+num+'][payTime]" class="date textInput valid" style="width:133px;"/></li>';
			html +='<li>支付方式'+num+'：<select name="zfInfo['+num+'][payType]"><option value="1">在线支付</option><option value="2">转账支付</option><option value="3">刷卡支付</option><option value="4">现金支付</option></select></li>';
			html +='<li class="del style" >删除</li>';
			html +='</ul>';
			$("#zfapper").before(html);
			$(this).attr("num",num);
			//重载删除
			$("#addzf .del").bind("click",function(){$(this).parent().remove();});				
			});				
		//删除
		$("#addzf .del").bind("click",function(){$(this).parent().remove();});	
	});
</script>
<script type="text/javascript">
	$(function(){
		$(".sk").live('change',function(){
			var typeID=$(this).val();
			var type='type';
			var sk=$(this);
			$.getJSON("__URL__/addOrder",{type:type,typeID:typeID},function(data){
				if(data.status==1){																	
					var html="";							
					html +='<select name="[bank]">';
					$.each(data.list,function(i,item){
						html +='<option value="'+item.id+'">'+item.bank+'</option>';										
					})									
					html +='</select>';
					sk.next("select").html(html);
				}else{
					var html=""
					html +='<select name="bank" class="bank"><option value="0">-请选择-</option></select>';
					sk.next("select").html(html);
				}
			})
		})							
	})	                         
</script>
<script language="javascript">
function SumNum(){
	var sumValue;
	var sumYing;
	cgj=eval(cg.value);
	xsj=eval(xs.value);
	sfj=eval(sf.value);
	bxj=eval(bx.value);	
	
	if (isNaN(cgj)){cgj=0}
	if (isNaN(xsj)){xsj=0}
	if (isNaN(sfj)){sfj=0}
	if (isNaN(bxj)){bxj=0}	
	
	sumValue = xsj+sfj+bxj;
	self['res'].value ='￥'+sumValue;
	
	sumFu=cgj+sfj;
	self['fu'].value ='￥'+sumFu;
	
}
</script>